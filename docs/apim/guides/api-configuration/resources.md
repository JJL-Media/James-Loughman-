---
description: >-
  This page describes the purpose and configuration of each default APIM
  resource.
---

# Resources

## Overview

Every API Management installation includes several default resources that are commonly used in standard APIM implementations and can be configured during the API design phase. The recommended configuration method employs the [Policy Studio](../policy-design/).

The following sections summarize resource descriptions, configuration options, and configuration examples.

## Resource descriptions

APIM includes several default resources, each of which is described in more detail below.&#x20;

* **Cache:** Maintains a cache linked to the API lifecycle, i.e., the cache is initialized when the API starts and released when the API stops. It is responsible for storing HTTP responses to avoid subsequent calls to the backend. The current implementation is based on [Hazelcast](https://hazelcast.com/).
* **Cache Redis:** Same as Cache (above), but the current implementation is based on Redis. The Cache Redis resource can be configured standalone or as part of the Redis Sentinel monitoring solution.
* **OAuth2 - Gravitee Access Management:** Introspects an **access\_token** generated by a Gravitee AM instance.
* **OAuth2 - Generic Authorization Server:** Introspects an **access\_token** generated by a generic OAuth2 authorization server. This resource provides a comprehensive configuration for how token introspection is applied in to accommodate common authorization servers.
* **Confluent Schema Registry:** Fetches serialization/deserialization data from a Confluent schema registry.
* **HTTP Authentication Provider:** Validates user credentials against an HTTP server.
* **Inline Authentication Provider:** Authenticates a user in memory.
* **LDAP Authentication Provider:** Authenticates a user in LDAP.
* **Keycloak Adapter:** Introspects an access token.

{% hint style="warning" %}
The **Cache Redis** plugin is not included in the default APIM distribution, but you can [download](https://download.gravitee.io/#graviteeio-apim/plugins/resources/gravitee-resource-cache-redis/) and [install](https://docs.gravitee.io/apim/3.x/apim\_installation\_guide\_docker\_customize.html#install\_an\_additional\_plugin) it. For information on configuring cache in APIM, see [Configure cache](../../getting-started/configuration/configure-cache.md). For information on configuring the rate limit repository plugin for Redis, see [Redis](../../getting-started/configuration/configure-repositories.md#redis).
{% endhint %}

### OAuth2 APIM compatibility

<table><thead><tr><th width="161">APIM version</th><th width="263">Gravitee Access Management plugin version</th><th>Generic Authorization Server plugin version</th></tr></thead><tbody><tr><td>3.18.x to latest</td><td>2.x and upper</td><td>2.x and upper</td></tr><tr><td>3.10.x to 3.17.x</td><td>1.14.x and upper</td><td>1.16.x and upper</td></tr><tr><td>Up to 3.9.x</td><td>Up to 1.13.x</td><td>Up to 1.15.x</td></tr></tbody></table>

## Configuration options

Each resource can be customized with a unique set of configuration options.

### Cache

<table><thead><tr><th width="154">Property</th><th width="417">Description</th><th>Default</th></tr></thead><tbody><tr><td>Cache name</td><td>Name of the cache</td><td>my-cache</td></tr><tr><td>Time to idle</td><td>Maximum number of seconds an element can exist in the cache without being accessed. When this threshold is reached, the element expires and will no longer be returned from the cache. The default value is 0, i.e., no timeToIdle (TTI) eviction takes place (infinite lifetime).</td><td>0</td></tr><tr><td>Time to live</td><td>Maximum number of seconds an element can exist in the cache, regardless of usage. When this threshold is reached, the element expires and will no longer be returned from the cache. The default value is 0, i.e., no timeToLive (TTL) eviction takes place (infinite lifetime).</td><td>0</td></tr><tr><td>Max entries on heap</td><td>Maximum number of objects to be held in local heap memory (0 = no limit)</td><td>1000</td></tr></tbody></table>

### Cache Redis

The Cache Redis resource can operate standalone or with the Redis Sentinel monitoring solution. The majority of Cache Redis configuration options are common to both modes of operation, but several are exclusive to either standalone or Sentinel as indicated with a **bold asterisk (\*)**.

<table><thead><tr><th width="167">Property</th><th width="359">Description</th><th>Default</th></tr></thead><tbody><tr><td>Cache name</td><td>Name of the cache</td><td>my-redis-cache</td></tr><tr><td>Release cache</td><td><p>Enabled: The resource will release the cache when the API is stopped </p><p>Disabled: The cache must be managed manually on the Redis server</p></td><td>false</td></tr><tr><td>Max total</td><td>Maximum number of connections supported by the pool</td><td>8</td></tr><tr><td>Password</td><td>The password for the instance</td><td>-</td></tr><tr><td>Time to live</td><td>Maximum number of seconds an element can exist in the cache, regardless of usage. When this threshold is reached, the element expires and will no longer be returned from the cache. The default value is 0, i.e., no timeToLive (TTL) eviction takes place (infinite lifetime).</td><td>0</td></tr><tr><td>Timeout</td><td>Specifies the connection timeout and the read/write timeout</td><td>2000</td></tr><tr><td>Use SSL</td><td>Toggle to use SSL connections</td><td>true</td></tr><tr><td>Use standalone mode</td><td>Toggle to use standalone mode</td><td>true</td></tr><tr><td>Host</td><td>The host of the instance<br><strong>*Standalone config only</strong></td><td>localhost</td></tr><tr><td>Port</td><td>The port of the instance<br><strong>*Standalone config only</strong></td><td>6379</td></tr><tr><td>Use sentinel mode</td><td>Toggle to use sentinel mode. Sentinel provides high availability for Redis (effectively, the Redis deployment persists without human intervention, barring certain kinds of failures)</td><td>false</td></tr><tr><td>Master</td><td>Sentinel master ID <br><strong>*Sentinel config only</strong></td><td>sentinel-master</td></tr><tr><td>Sentinel password</td><td>Sentinel password<br><strong>*Sentinel config only</strong></td><td>-</td></tr><tr><td>Sentinel nodes</td><td>Array of sentinel nodes<br><strong>*Sentinel config only</strong></td><td>-</td></tr></tbody></table>

### OAuth2 - Gravitee Access Management

<table><thead><tr><th width="177">Property (Type)</th><th width="420">Description</th><th>Default</th></tr></thead><tbody><tr><td>serverURL<br>(string)</td><td>URL of the Gravitee Access Management server</td><td>-</td></tr><tr><td>securityDomain<br>(string)</td><td>Security domain (realm) from which the token has been generated and must be introspected</td><td>-</td></tr><tr><td>clientId<br>(string)</td><td>Client identifier</td><td>-</td></tr><tr><td>clientSecret<br>(string)</td><td>Client secret</td><td>-</td></tr><tr><td>userClaim<br>(string)</td><td>User claim field to store end user in log analytics</td><td>sub</td></tr><tr><td>useSystemProxy<br>(boolean)</td><td>Toggle to use system proxy</td><td>false</td></tr></tbody></table>

### OAuth2 - Generic Authorization Server

<table><thead><tr><th width="310">Property (Type)</th><th width="236">Description</th><th>Default</th></tr></thead><tbody><tr><td>introspectionEndpoint<br>(string)</td><td>URL the resource uses to introspect an incoming access token</td><td>-</td></tr><tr><td>useSystemProxy<br>(boolean)</td><td>Toggle to use system proxy</td><td>false</td></tr><tr><td>introspectionEndpointMethod<br>(HTTP Method)</td><td>HTTP method to introspect the access token</td><td>GET</td></tr><tr><td>clientId<br>(string)</td><td>Client identifier</td><td>-</td></tr><tr><td>clientSecret<br>(string)</td><td>Client secret</td><td>-</td></tr><tr><td>useClientAuthorizationHeader<br>(boolean)</td><td>To prevent token scanning attacks, the endpoint MUST require access authorization. Gravitee uses an HTTP header for client authentication.</td><td>true</td></tr><tr><td>clientAuthorizationHeaderName<br>(string)</td><td>Authorization header</td><td>Authorization</td></tr><tr><td>clientAuthorizationHeaderScheme<br>(string)</td><td>Authorization scheme</td><td>Basic</td></tr><tr><td>tokenIsSuppliedByQueryParam<br>(boolean)</td><td>Access token is passed to the introspection endpoint using a query parameter</td><td>true</td></tr><tr><td>tokenQueryParamName<br>(string)</td><td>Query parameter that supplies access token</td><td>token</td></tr><tr><td>tokenIsSuppliedByHttpHeader<br>(boolean)</td><td>Access token is passed to the introspection endpoint using an HTTP header</td><td>false</td></tr><tr><td>tokenHeaderName<br>(string)</td><td>HTTP header used to supply access token</td><td>-</td></tr></tbody></table>

### Confluent Schema Registry

|   |   |   |
| - | - | - |
|   |   |   |
|   |   |   |
|   |   |   |

### HTTP Authentication Provider

|   |   |   |
| - | - | - |
|   |   |   |
|   |   |   |
|   |   |   |

### Inline Authentication Provider

|   |   |   |
| - | - | - |
|   |   |   |
|   |   |   |
|   |   |   |

### LDAP Authentication Provider

|   |   |   |
| - | - | - |
|   |   |   |
|   |   |   |
|   |   |   |

### Keycloak Adapter

|   |   |   |
| - | - | - |
|   |   |   |
|   |   |   |
|   |   |   |







## Configuration Examples

{% tabs %}
{% tab title="Cache" %}
```json
{
    "name" : "cache",
    "type" : "cache",
    "enabled" : true,
    "configuration" : {
        "name": "my-cache",
        "timeToIdleSeconds":0,
        "timeToLiveSeconds":0,
        "maxEntriesLocalHeap":1000
    }
}
```
{% endtab %}

{% tab title="Cache Redis" %}
Standalone configuration example:

```json
{
    "name" : "my-redis-cache",
    "type" : "cache-redis",
    "enabled" : true,
    "configuration" : {
        "name" : "my-redis-cache",
        "releaseCache": false,
        "maxTotal" : 8,
        "password" : "secret",
        "timeToLiveSeconds" : 600,
        "timeout" : 2000,
        "useSsl" : true,
        "sentinelMode" : false,
        "standalone": {
            "host" : "localhost",
            "port" : 6379
        }
    }
}
```

Sentinel configuration example:

```json
{
    "name" : "my-redis-cache",
    "type" : "cache-redis",
    "enabled" : true,
    "configuration" : {
        "name" : "my-redis-cache",
        "releaseCache": false,
        "maxTotal" : 8,
        "password" : "secret",
        "timeToLiveSeconds" : 600,
        "timeout" : 2000,
        "useSsl" : true,
        "sentinelMode" : true,
        "sentinel" : {
            "masterId" : "sentinel-master",
            "password" : "secret",
            "nodes": [
              {
                "host" : "localhost",
                "port" : 26379
              },
              {
                "host" : "localhost",
                "port" : 26380
              },
              {
                "host" : "localhost",
                "port" : 26381
              }
            ]
        }
    }
}
```
{% endtab %}

{% tab title="OAuth2 - Gravitee AM" %}
```json
{
    "configuration": {
        "clientId": "my-client",
        "clientSecret": "f2ddb55e-30b5-4a45-9db5-5e30b52a4574",
        "securityDomain": "my-security",
        "serverURL": "https://graviteeio_access_management",
        "userClaim": "sub"
    }
}
```
{% endtab %}

{% tab title="OAuth2 - Generic Auth Server" %}
```json
{
    "configuration": {
        "introspectionEndpoint": "https://my_authorization_server/oauth/check_token",
        "introspectionEndpointMethod": "POST",
        "clientAuthorizationHeaderName": "Authorization",
        "clientAuthorizationHeaderScheme": "Basic",
        "clientId": "my-client",
        "clientSecret": "f2ddb55e-30b5-4a45-9db5-5e30b52a4574",
        "tokenIsSuppliedByHttpHeader": false,
        "tokenIsSuppliedByQueryParam": true,
        "tokenQueryParamName": "token",
        "useClientAuthorizationHeader": true
    }
}

```
{% endtab %}
{% endtabs %}
